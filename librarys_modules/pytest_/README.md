# По книге Briann Okken - Python Testing with pytest

## Запуск тестов:
Командой в терминале `pytest`, где указывается директория, 
откуда производится запуск тестов или перечисляются файлы, содержащие тесты.\
`pytest .` запустит все тесты.\
Можно указать только отдельные файлы для запуска:\
`pytest tests` или `putest tests/test_calculator.py tests/tasks/test_three.py`\
При указании флага `-v` будет показана дополнительная информация.

Часть выполнения pytest, где pytest проходит и находит, какие тесты запускать,
называется test discovery (тестовым обнаружением)
#### Выполнение только одного теста:
Указать файл напрямую и добавить `::test_name`\
`$ pytest -v tasks/test_four.py::test_asdict`

### Какими должны быть названия, чтобы pytest обнаруживал тесты:
- Тестовые файлы должны быть названы test_<something>.py или <something>_test.py.
- Методы и функции тестирования должны быть названы test_<something>.
- Тестовые классы должны быть названы Test<Something>.

Чтобы изменить эти правила, нужно вносить правки в конфигурации

### Результат запуска одного файла
```
$ cd /path/to/code/ch1/tasks
$ pytest test_three.py
================= test session starts ==================
platform darwin -- Python 3.6.2, pytest-3.2.1, py-1.4.34, pluggy-0.4.0
rootdir: /path/to/code/ch1/tasks, inifile:
collected 2 items
test_three.py ..
=============== 2 passed in 0.01 seconds ===============
```
Платформа darwin —  Mac. На компьютере с ОС Windows
платформа отличается.\
Далее перечислены версии Python и pytest, а также зависимости от
пакетов pytest.\
И py, и pluggy — это пакеты, разработанные командой pytest, чтобы
помочь с реализацией pytest.

#### rootdir: /path/to/code/ch1/tasks, inifile:
rootdir — это самый верхний общий каталог для всех каталогов
в которых ищется тестовый код.\
В inifile (здесь пустой) перечислены используемые файлы 
конфигурации.\
Конфигурационными файлами могут быть pytest.ini,
tox.ini или setup.cfg.

#### collected 2 items
Это две тестовые функции в файле.

#### test_three.py ..
test_three.py показывает тестируемый файл. Для каждого тестового
файла есть одна строка. Две точки означают, что тесты пройдены — по
одной точке для каждой тестовой функции или метода. Точки
предназначены только для прохождения тестов. Failures (сбоев),
errors (ошибок), skips (пропусков), xfails, и xpasses обозначаются 
с F, E, s, x, и Х, соответственно. Если вы хотите видеть больше
точек для прохождения тестов, используйте опцию `-v` или `--verbose`.

#### == 2 passed in 0.01 seconds ==
Эта строка относится к числу пройденных тестов и времени, затраченному
на весь сеанс тестирования. При наличии непроходных тестов здесь
также будет указан номер каждой категории.

#### Возможные результаты тестовой функции:
- PASSED (.): Тест выполнен успешно.
- FAILED (F): Тест не выполнен успешно (или XPASS + strict).
- SKIPPED (s): Тест был пропущен. Вы можете заставить pytest 
пропустить тест, используя декораторы @pytest.mark.skip() или
pytest.mark.skipif()
- xfail (x): Тест не должен был пройти, был запущен и провалился.
Вы можете принудительно указать pytest, что тест должен
завершиться неудачей, используя декоратор @pytest.mark.xfail()
- XPASS (X): Тест не должен был пройти, был запущен и прошел!..
- ERROR (E): Исключение произошло за пределами функции тестирования,
либо в фикстуре
